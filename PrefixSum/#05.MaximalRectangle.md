### #05. Maximal Rectangle

Leetcode link: https://leetcode.com/problems/maximal-rectangle/

**Naive (TLE)** O((MN)^2)
```cpp
int maximalRectangle(vector<vector<char>>& matrix) {
    int m = matrix.size(), n = matrix[0].size(), res = 0;
    for(int i=0; i<m; i++){
        for(int j=0; j<n; j++){
            int colLen = n;
            for(int row=i; row<m && matrix[row][j] == '1'; row++){
                int col = j;
                while(col < n && matrix[row][col] == '1') col++;
                colLen = min(colLen, col-j); //take only the least col expanded you can see
                res = max(res, colLen * (row-i+1));
            }
        }
    }
    return res;
}
```

**Prefix Code** ~O(M^2 * N)
```cpp
int maximalRectangle(vector<vector<char>>& matrix) {
    int m = matrix.size(), n = matrix[0].size(), res = 0;
    
    vector<vector<int>> nextOne(m, vector<int>(n, 0));
    for(int i=0; i<m; i++){
        int prev = 0;
        for(int j=n-1; j >= 0; j--){
            if(matrix[i][j] == '1')
                prev += 1;
            else
                prev = 0;
            nextOne[i][j] = prev;
        }
    }

    for(int i=0; i<m; i++){
        for(int j=0; j<n; j++){
            int colLen = n;
            for(int row=i; row<m && matrix[row][j] == '1'; row++){
                colLen = min(colLen, nextOne[row][j]);
                res = max(res, colLen * (row-i+1));
            }
        }
    }
    return res;
}
```
