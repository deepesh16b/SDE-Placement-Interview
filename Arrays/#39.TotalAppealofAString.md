### #39. Total Appeal of A String

Leetcode: https://leetcode.com/problems/total-appeal-of-a-string/

```
The appeal of a string is the number of distinct characters found in the string.

For example, the appeal of "abbca" is 3 because it has 3 distinct characters: 'a', 'b', and 'c'.
Given a string s, return the total appeal of all of its substrings.

Input: s = "abbca"
Output: 28
```

**Easy Method**
```cpp
long long appealSum(string s) {
    long long res = 0, n = s.size();
    vector<int> prev(26, -1); //-1 is important (becuz we require (i+1) in formula)

    for (int i = 0; i < n; i++) {
        res += (i - prev[s[i] - 'a']) * (n - i);
        prev[s[i] - 'a'] = i;
    }

    return res;
}
```
OR
**By Inspection**
```cpp
long long appealSum(string s) {
    long long n = s.size(), res = 0, prevTot = 0;
    vector<int> prev(26, 0);

    for (int i = 0; i < n; i++) {
        char chi = s[i] - 'a';
        prevTot += (i + 1) - prev[chi];
        res += prevTot;
        prev[chi] = i + 1;
    }

    return res;
}
```

**Atmost K Trick**
```cpp
using ll = long long;

class Solution {
public:
    int mp[26];
    ll atmostKChars(string& s, int k){
        ll j = 0, cnt = 0, size = 0;
        for(int i=0; i<26; i++) mp[i] = 0;
        
        for(int i=0; i<s.size(); i++){
            char ch = s[i]-'a';
            mp[ch]++;
            if(mp[ch] == 1) size++;
            while(size > k){
                if(--mp[s[j]-'a'] == 0) size--;
                j++;
            }
            
            cnt += (long long) i-j+1;
        }
        
        return cnt;
    }
    ll countExactlyKChars(string& s, int k){
        return atmostKChars(s, k) - atmostKChars(s, k-1);
    }
    ll appealSum(string& s) {
        ll res = 0;
        for(int cnt=1; cnt<=26; cnt++)
            res += countExactlyKChars(s, cnt)*cnt;
        return res;
    }
};
```
